(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{269:function(t,s,a){"use strict";a.r(s);var e=a(38),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"module-3-create-and-run-a-docker-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-3-create-and-run-a-docker-application","aria-hidden":"true"}},[t._v("#")]),t._v(" Module 3: Create and run a Docker application")]),t._v(" "),a("h3",{attrs:{id:"static-site"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#static-site","aria-hidden":"true"}},[t._v("#")]),t._v(" Static site")]),t._v(" "),a("p",[t._v("Firstly, we will start step by step to deploy one static web site with nginx.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v(" $ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" simple-site\n\n $ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" simple-site/index.html "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'EOF'\n  <html>\n  <head>\n    <title>Docker workshop</title>\n  </head>\n  <body>\n    <h1>Hello Docker workshop - my static site.</h1>\n  </body>\nEOF")]),t._v("\n")])])]),a("p",[t._v("Next step, we download nginX image and run container directly by "),a("code",[t._v("docker run")]),t._v(", the "),a("code",[t._v("--rm")]),t._v(" flag automatically removes the container when it exits.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run --name static-site -v /home/workshop/simple-site:/usr/share/nginx/html:ro --rm nginx\n")])])]),a("p",[t._v("The "),a("code",[t._v("-v")]),t._v(" flag is used to mount volume from host to container. Awesome, our website is up and running, but how can we see it?")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it static-site "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost\n")])])]),a("p",[t._v("Currently, Docker is not exposing any port to host. We re-run "),a("code",[t._v("docker run")]),t._v(" with "),a("code",[t._v("-p")]),t._v(" to publish port.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run --name static-site -v /home/workshop/simple-site:/usr/share/nginx/html:ro -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("32769")]),t._v(":80 -d nginx\n")])])]),a("p",[t._v("In the above command, "),a("strong",[a("code",[t._v("-p")])]),t._v(" flag is used to publish port from container to host, syntax "),a("strong",[a("code",[t._v("[host port]")]),t._v(":"),a("code",[t._v("[container port]")])])]),t._v(" "),a("p",[t._v("In the browser "),a("code",[t._v("http://workshop-vm-[x].eastasia.cloudapp.azure.com:32769/")])]),t._v(" "),a("h3",{attrs:{id:"our-first-image"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#our-first-image","aria-hidden":"true"}},[t._v("#")]),t._v(" Our first image")]),t._v(" "),a("p",[t._v("It is time to build and own Docker images. In this section, we will create one Docker image for "),a("strong",[t._v("Contact service")]),t._v(", based on "),a("code",[t._v(".Net Core 3.0 previce 8")]),t._v(". Besides, it also guides you how to deploy Postgres by container and connect them together.")]),t._v(" "),a("p",[t._v("Fristly, please clone the repository locally.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/tungphuong/crm.git\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" crm/\n")])])]),a("h3",{attrs:{id:"dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile","aria-hidden":"true"}},[t._v("#")]),t._v(" Dockerfile")]),t._v(" "),a("p",[t._v('In "Contact" service directory has a Dockerfile. It starts by '),a("code",[t._v("FROM")]),t._v(" keyword")]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("FROM mcr.microsoft.com/dotnet/core/sdk:3.0.100-preview8-bionic AS builder\n")])])]),a("p",[t._v("Configuring the working directory in container")]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("WORKDIR /src\n")])])]),a("p",[t._v("The next steps is to write commands of:")]),t._v(" "),a("ul",[a("li",[t._v("Coping file, folder installing the dependencies...")])]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('COPY ["src/BuildingBlocks/CRM.Shared/*.csproj", "src/BuildingBlocks/CRM.Shared/"]\nCOPY ["src/BuildingBlocks/CRM.Migration/*.csproj", "src/BuildingBlocks/CRM.Migration/"]\n...\n')])])]),a("ul",[a("li",[t._v("Restoring packages")])]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("RUN dotnet restore src/Contact/CRM.Contact.Api/ /property:Configuration=Release ${feed} -nowarn:msb3202,nu1503\n")])])]),a("ul",[a("li",[t._v("Building project")])]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("RUN dotnet publish src/Contact/CRM.Contact.Api/ -c Release -o /app --no-restore\n")])])]),a("p",[t._v("The next thing is to set environment variables")]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ENV ASPNETCORE_URLS http://*:80\nENV ASPNETCORE_ENVIRONMENT docker\n")])])]),a("p",[t._v("Last one is to specify the port number and the command for running the service")]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('EXPOSE 80\nENTRYPOINT [ "dotnet",  "CRM.Contact.Api.dll"]\n')])])]),a("p",[t._v("Our Dockerfile is ready and looks like")]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('FROM mcr.microsoft.com/dotnet/core/sdk:3.0.100-preview8-bionic AS builder\n\nARG feed=\'--source "https://api.nuget.org/v3/index.json"\'\n\nWORKDIR /src\nCOPY ["src/BuildingBlocks/CRM.Shared/*.csproj", "src/BuildingBlocks/CRM.Shared/"]\nCOPY ["src/BuildingBlocks/CRM.Migration/*.csproj", "src/BuildingBlocks/CRM.Migration/"]\nCOPY ["src/Contact/CRM.Contact.Contract/*.csproj", "src/Contact/CRM.Contact.Contract/"]\nCOPY ["src/Contact/CRM.Contact.Api/*.csproj", "src/Contact/CRM.Contact.Api/"]\n\nRUN dotnet restore src/Contact/CRM.Contact.Api/ /property:Configuration=Release ${feed} -nowarn:msb3202,nu1503\nRUN dotnet restore src/BuildingBlocks/CRM.Migration/ /property:Configuration=Release ${feed} -nowarn:msb3202,nu1503\n\nCOPY ["src/BuildingBlocks/CRM.Shared/.", "src/BuildingBlocks/CRM.Shared/"]\nCOPY ["src/BuildingBlocks/CRM.Migration/.", "src/BuildingBlocks/CRM.Migration/"]\nCOPY ["src/Contact/CRM.Contact.Contract/.", "src/Contact/CRM.Contact.Contract/"]\nCOPY ["src/Contact/CRM.Contact.Api/.", "src/Contact/CRM.Contact.Api/"]\nRUN dotnet publish src/Contact/CRM.Contact.Api/ -c Release -o /app --no-restore\n\nFROM builder AS migration\nWORKDIR /src/src/BuildingBlocks/CRM.Migration/\n\nFROM mcr.microsoft.com/dotnet/core/aspnet:3.0.0-preview8-bionic\nWORKDIR /app\n\nENV ASPNETCORE_URLS http://*:80\nENV ASPNETCORE_ENVIRONMENT docker\n\nCOPY --from=builder /app .\n\nEXPOSE 80\nENTRYPOINT [ "dotnet",  "CRM.Contact.Api.dll"]\n')])])]),a("h3",{attrs:{id:"build-image-from-dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-image-from-dockerfile","aria-hidden":"true"}},[t._v("#")]),t._v(" Build image from Dockerfile")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker build -t crmnow/contact-api -f src/Contact/CRM.Contact.Api/Dockerfile "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n\nSending build context to Docker daemon  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".223MB\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/23 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" FROM mcr.microsoft.com/dotnet/core/sdk:3.0.100-preview8-bionic AS builder\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 152368392bc4\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/23 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" ARG "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("feed")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--source \"https://api.nuget.org/v3/index.json\"'")]),t._v("\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Using cache\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 0751506e9318\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("/23 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" WORKDIR /src\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Using cache\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 9414cf4a0d7f\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("/23 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" COPY "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/BuildingBlocks/CRM.Shared/*.csproj"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/BuildingBlocks/CRM.Shared/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" e8c842891507\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("/23 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" COPY "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/BuildingBlocks/CRM.Migration/*.csproj"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/BuildingBlocks/CRM.Migration/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" abf5ef0a4fc6\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("/23 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" COPY "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/Contact/CRM.Contact.Contract/*.csproj"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/Contact/CRM.Contact.Contract/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 2266cf6ea797\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v("/23 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" COPY "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/Contact/CRM.Contact.Api/*.csproj"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"src/Contact/CRM.Contact.Api/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 17077cbc16de\nStep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("/23 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" RUN dotnet restore src/Contact/CRM.Contact.Api/ /property:Configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Release "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${feed}")]),t._v(" -nowarn:msb3202,nu1503\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" 9c30eb05086a\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("\n Step "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("23")]),t._v("/23 "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" ENTRYPOINT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dotnet"')]),t._v(",  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CRM.Contact.Api.dll"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" Running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" e0b1f832d22d\nRemoving intermediate container e0b1f832d22d\n ---"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" 1ae9e139107b\nSuccessfully built 1ae9e139107b\nSuccessfully tagged crmnow/contact-api:latest\n")])])]),a("p",[t._v('Create "Contact" container from the above image.')]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run -p "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5200")]),t._v(":80 crmnow/contact-api:latest\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("08:49:01 INF "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SourceContext"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Microsoft.Hosting.Lifetime"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Environment"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"docker"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ApplicationName"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Contact-Service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Now listening on: http://"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("::"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":80\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("08:49:01 INF "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SourceContext"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Microsoft.Hosting.Lifetime"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Environment"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"docker"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ApplicationName"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Contact-Service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Application started. Press Ctrl+C to shut down.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("08:49:01 INF "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SourceContext"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Microsoft.Hosting.Lifetime"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Environment"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"docker"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ApplicationName"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Contact-Service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Hosting environment: docker\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("08:49:01 INF "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SourceContext"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Microsoft.Hosting.Lifetime"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Environment"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"docker"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ApplicationName"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Contact-Service"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Content root path: /app\n")])])]),a("p",[t._v("In the browser http://workshop-vm-[x].eastasia.cloudapp.azure.com:5200/swagger/index.html\n"),a("img",{attrs:{src:"/acw-containerization/contact-swagger.png",alt:""}})]),t._v(" "),a("p",[t._v("Congratulations! You have successfully created your first docker image.")]),t._v(" "),a("h3",{attrs:{id:"docker-push"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-push","aria-hidden":"true"}},[t._v("#")]),t._v(" Docker push")]),t._v(" "),a("p",[t._v("The first thing that we need to do defore we deploy our app to Azure or any cloud is to publish docker image on a registry. There are many Docker registry such as Docker Hub, ACR,... For now, let's assume that you had one contrainer registry on ACR. To publish, follow below steps")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("docker login "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("your ACR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".azurecr.io\nUsername: \nPassword: \nWARNING"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Your password will be stored unencrypted "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /home/workshop/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#credentials-store")]),t._v("\n\nLogin Succeeded\n")])])]),a("p",[t._v("Tag the image")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("docker tag crmnow/contact-api  acrworkshophub.azurecr.io/crmnow/contact-api:v1\n")])])]),a("p",[t._v("Push it")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("docker push acrworkshophub.azurecr.io/crmnow/contact-api:v1\n")])])]),a("p",[t._v("Logout")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("docker logout acrworkshophub.azurecr.io\n")])])])])},[],!1,null,null,null);s.default=n.exports}}]);